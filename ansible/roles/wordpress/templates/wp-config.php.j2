# ansible/roles/wordpress/templates/wp-config.php.j2
<?php
/**
 * WordPress configuration file
 * Generated by Ansible on {{ ansible_date_time.iso8601 }}
 */

// ** Database settings ** //
define('DB_NAME', '{{ wp_db_name | default('wordpress') }}');
define('DB_USER', '{{ wp_db_user | default('wpuser') }}');
define('DB_PASSWORD', '{{ wp_db_password }}');
define('DB_HOST', '{{ wp_db_host | default('localhost') }}');
define('DB_CHARSET', 'utf8');
define('DB_COLLATE', '');

// ** Authentication unique keys and salts ** //
define('AUTH_KEY',         '{{ wp_auth_key | default('put-your-unique-phrase-here') }}');
define('SECURE_AUTH_KEY',  '{{ wp_secure_auth_key | default('put-your-unique-phrase-here') }}');
define('LOGGED_IN_KEY',    '{{ wp_logged_in_key | default('put-your-unique-phrase-here') }}');
define('NONCE_KEY',        '{{ wp_nonce_key | default('put-your-unique-phrase-here') }}');
define('AUTH_SALT',        '{{ wp_auth_salt | default('put-your-unique-phrase-here') }}');
define('SECURE_AUTH_SALT', '{{ wp_secure_auth_salt | default('put-your-unique-phrase-here') }}');
define('LOGGED_IN_SALT',   '{{ wp_logged_in_salt | default('put-your-unique-phrase-here') }}');
define('NONCE_SALT',       '{{ wp_nonce_salt | default('put-your-unique-phrase-here') }}');

// ** Table prefix ** //
$table_prefix = '{{ wp_table_prefix | default('wp_') }}';

// ** WordPress debug mode ** //
define('WP_DEBUG', {{ wp_debug | default(false) }});

// ** EFS shared directory ** //
define('WP_CONTENT_DIR', '/var/www/wordpress/wp-content');
define('WP_CONTENT_URL', '{{ wp_content_url | default('/wp-content') }}');

// ** Redis caching ** //
{% if wp_redis_enabled | default(false) %}
define('WP_REDIS_HOST', '{{ wp_redis_host }}');
define('WP_REDIS_PORT', {{ wp_redis_port | default(6379) }});
define('WP_REDIS_DATABASE', {{ wp_redis_db | default(0) }});
define('WP_REDIS_TIMEOUT', 1);
define('WP_REDIS_READ_TIMEOUT', 1);
{% endif %}

// ** Absolute path ** //
if ( !defined('ABSPATH') ) {
    define('ABSPATH', __DIR__ . '/');
}

// ** Sets up WordPress vars and included files ** //
require_once ABSPATH . 'wp-settings.php';